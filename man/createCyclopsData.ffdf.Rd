% Generated by roxygen2 (4.0.2): do not edit by hand
\name{createCyclopsData.ffdf}
\alias{createCyclopsData.ffdf}
\title{Convert data from two ffdf objects into a CyclopsData object}
\usage{
createCyclopsData.ffdf(outcomes, covariates, modelType = "lr",
  addIntercept = TRUE, offsetAlreadyOnLogScale = FALSE,
  sortCovariates = TRUE, makeCovariatesDense = NULL)
}
\arguments{
\item{outcomes}{A ffdf object containing the outcomes with predefined columns (see below).}

\item{modelType}{Cyclops model type. Current supported types are "pr", "cpr", lr", "clr", "sccs", or "cox"}

\item{addIntercept}{Add an intercept to the model?}

\item{offsetAlreadyOnLogScale}{Is the time variable already on a log scale?}

\item{sortCovariates}{Do the covariates still need to be sorted?}

\item{covariateSql}{A ffdf object containing the covariates with predefined columns (see below).}

\item{useOffsetCovariate}{Use the time variable in the model as an offset?}

\item{batchBytes}{Number of bytes to be read from the ffdf objects at a time. Larger batch sizes lead to fewer conversion calls
and should be more efficient, but may lead to out-of-memory errors.}
}
\value{
An object of type CyclopsModel
}
\description{
\code{createCyclopsData.ffdf} loads data from two ffdf objects, and inserts it into a Cyclops data object.
}
\details{
These columns are expected in the outcome object:
\tabular{lll}{
  \verb{stratum_id}    \tab(integer) \tab (optional) Stratum ID for conditional regression models \cr
  \verb{row_id}    \tab(integer) \tab Row ID is used to link multiple covariates (x) to a single outcome (y) \cr
  \verb{y}    \tab(real) \tab The outcome variable \cr
  \verb{time}    \tab(real) \tab For models that use time (e.g. Poisson or Cox regression) this contains time (e.g. number of days) \cr
}
The outcome table should be sorted by stratum_id and then row_id

These columns are expected in the covariates object:
\tabular{lll}{
  \verb{stratum_id}    \tab(integer) \tab (optional) Stratum ID for conditional regression models \cr
  \verb{row_id}  	\tab(integer) \tab Row ID is used to link multiple covariates (x) to a single outcome (y) \cr
  \verb{covariate_id}    \tab(integer) \tab A numeric identifier of a covariate  \cr
  \verb{covariate_value}    \tab(real) \tab The value of the specified covariate \cr
}
The covariate table should be sorted by stratum_id, row_id and covariate_id
}
\examples{
\dontrun{
  connectionDetails <- createConnectionDetails(dbms="sql server", server="RNDUSRDHIT07.jnj.com", schema="test")
  connection <- connect(connectionDetails)

  outcomes <- dbGetQuery.ffdf(conn,"SELECT * FROM outcomes ORDER BY row_id")
  covariates <- dbGetQuery.ffdf(conn,"SELECT * FROM covariates ORDER BY row_id, covariate_id")

  cyclopsData <- dbGetCyclopsInput(connection,outcomes,covariates,modelType = "lr")

  dbDisconnect(connection)

  cyclopsFit <- fitCyclopsModel(cyclopsData, prior = prior("normal",0.01))
}
}

